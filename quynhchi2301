<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Happy Birthday!</title>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Nunito:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        /* --- C√ÄI ƒê·∫∂T CHUNG --- */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Nunito', sans-serif;
            height: 100vh;
            background-color: #ffc0cb;
            background-image: linear-gradient(to bottom, #ff9a9e, #fad0c4);
            overflow: hidden;
            color: #333;
        }

        /* --- C√ÅC M√ÄN H√åNH (SCREENS) --- */
        .screen {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            display: none; /* ·∫®n h·∫øt ban ƒë·∫ßu */
            flex-direction: column; justify-content: center; align-items: center;
            transition: opacity 0.5s;
        }
        .active { display: flex; } /* Class ƒë·ªÉ hi·ªán m√†n h√¨nh ƒëang d√πng */

        /* --- M√ÄN 1: KH√ìA (LOCK SCREEN) --- */
        .lock-box {
            background: rgba(255, 255, 255, 0.9);
            padding: 30px; border-radius: 20px; text-align: center;
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
        }
        .lock-box input {
            padding: 10px; font-size: 1.2rem; border-radius: 10px;
            border: 2px solid #ff6b81; outline: none; text-align: center; width: 200px; margin: 10px 0;
        }
        .btn-main {
            padding: 10px 25px; background: #ff6b81; color: white; border: none;
            border-radius: 20px; cursor: pointer; font-weight: bold; font-size: 1rem;
            transition: 0.3s;
        }
        .btn-main:hover { background: #ff4757; transform: scale(1.05); }

        /* --- M√ÄN 2: VIDEO --- */
        #video-container { width: 80%; max-width: 800px; position: relative; }
        video { width: 100%; border-radius: 15px; box-shadow: 0 10px 30px rgba(0,0,0,0.5); }
        .btn-skip {
            position: absolute; bottom: -50px; left: 50%; transform: translateX(-50%);
            background: white; color: #ff6b81;
        }

        /* --- M√ÄN 3: B·ª®C TH∆Ø --- */
        .letter-paper {
            background: #fffdf0; width: 350px; min-height: 400px;
            padding: 30px; border-radius: 5px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            position: relative;
            font-family: 'Dancing Script', cursive; font-size: 1.3rem; line-height: 1.6;
        }
        .letter-paper::before {
            content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background-image: linear-gradient(#ccc 1px, transparent 1px);
            background-size: 100% 1.5em; opacity: 0.3; pointer-events: none;
        }
        .click-hint {
            position: absolute; bottom: 15px; right: 15px;
            font-family: 'Nunito', sans-serif; font-size: 0.9rem;
            color: #ff6b81; cursor: pointer; font-weight: bold;
            animation: pulse 1s infinite;
        }
        @keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.1); } 100% { transform: scale(1); } }

        /* --- M√ÄN 4: B√ÅNH & ·∫¢NH & NH·∫†C --- */
        .top-msg {
            position: absolute; top: 20px; width: 100%; text-align: center;
            font-family: 'Dancing Script', cursive; font-size: 2.5rem; color: #d63031;
            text-shadow: 2px 2px white; z-index: 10;
        }
        .cake-img {
            width: 300px; animation: bounce 3s infinite; z-index: 5;
        }
        @keyframes bounce { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-20px); } }

        /* ·∫¢NH BAY (FLOATING PHOTOS) */
        .floating-photo {
            position: absolute; bottom: -200px; width: 120px;
            border: 4px solid white; border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            animation: floatUp linear forwards; z-index: 1;
        }
        @keyframes floatUp { to { transform: translateY(-120vh) rotate(360deg); } }

        /* --- TR√åNH PH√ÅT NH·∫†C SPOTIFY (G√ìC TR√ÅI D∆Ø·ªöI) --- */
        .spotify-player {
            position: fixed; bottom: 20px; left: 20px;
            width: 300px; background: #191414; color: white;
            padding: 15px; border-radius: 10px;
            display: flex; flex-direction: column; gap: 10px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5); z-index: 100;
            font-family: sans-serif;
        }
        .sp-header { display: flex; align-items: center; gap: 10px; }
        .sp-cover { width: 50px; height: 50px; border-radius: 5px; background: #333; object-fit: cover;}
        .sp-info { flex: 1; overflow: hidden; }
        .sp-title { font-weight: bold; font-size: 0.9rem; white-space: nowrap; }
        .sp-artist { font-size: 0.7rem; color: #b3b3b3; }
        .sp-controls { display: flex; justify-content: center; gap: 20px; align-items: center; margin-top: 5px; }
        .sp-btn { background: none; border: none; color: #b3b3b3; cursor: pointer; font-size: 1.2rem; }
        .sp-btn:hover { color: white; }
        .sp-play { color: white; font-size: 1.5rem; }
        .sp-progress { width: 100%; height: 4px; background: #535353; border-radius: 2px; margin-top: 5px; position: relative;}
        .sp-bar { height: 100%; background: #1db954; width: 0%; border-radius: 2px; transition: width 0.1s; }
        
        /* Responsive mobile */
        @media (max-width: 600px) {
            .spotify-player { width: 90%; left: 5%; bottom: 10px; }
            .letter-paper { width: 90%; }
            #video-container { width: 95%; }
        }
    </style>
</head>
<body>

    <div id="screen-lock" class="screen active">
        <div class="lock-box">
            <h2 style="color: #ff6b81;">Nh·∫≠p 4 s·ªë ƒë·ªÉ m·ªü kh√≥a n√® üîí</h2>
            <input type="password" id="pass-input" placeholder="****" maxlength="4">
            <br>
            <button class="btn-main" onclick="checkPass()">M·ªü Kh√≥a</button>
            <p id="error-msg" style="color: red; font-size: 0.9rem; display: none; margin-top: 10px;">Sai m·∫≠t m√£ r·ªìi!</p>
        </div>
    </div>

    <div id="screen-video" class="screen">
        <div id="video-container">
            <video id="myVideo" controls>
                <source src="cmsn.mp4" type="video/mp4">
                Tr√¨nh duy·ªát kh√¥ng h·ªó tr·ª£ video.
            </video>
            <button class="btn-main btn-skip" onclick="finishVideo()">Xem xong r·ªìi ‚ù§Ô∏è</button>
        </div>
    </div>

    <div id="screen-letter" class="screen">
        <div class="letter-paper">
            <p>
                G·ª≠i c·∫≠u,<br><br>
                Ch√∫c m·ª´ng sinh nh·∫≠t nh√©! ƒê√¢y l√† m·ªôt m√≥n qu√† nh·ªè t·ªõ l√†m t·∫∑ng c·∫≠u. 
                Hy v·ªçng tu·ªïi m·ªõi c·∫≠u s·∫Ω lu√¥n vui v·∫ª, h·∫°nh ph√∫c v√† ƒë·∫°t ƒë∆∞·ª£c m·ªçi ƒëi·ªÅu m√¨nh mong mu·ªën.<br><br>
                ƒÇn nhi·ªÅu ch√≥ng l·ªõn nha!<br><br>
                K√Ω t√™n,<br>
                <b>[T√™n b·∫°n]</b>
            </p>
            <div class="click-hint" onclick="openParty()">üëâ B·∫•m v√†o ƒë√¢y n√®</div>
        </div>
    </div>

    <div id="screen-party" class="screen">
        <div class="top-msg">Ch√∫c m·ªçi ƒëi·ªÅu t·ªët ƒë·∫πp s·∫Ω ƒë·∫øn v·ªõi c·∫≠u ‚ù§Ô∏è</div>
        
        <img src="https://i.pinimg.com/originals/37/e5/22/37e52296d9e504c5409c53644f1295b9.png" class="cake-img">
        
        <div class="spotify-player">
            <div class="sp-header">
                <img src="https://i.pinimg.com/564x/a2/63/c9/a263c938382c499299403487f5407024.jpg" class="sp-cover" id="track-art">
                <div class="sp-info">
                    <div class="sp-title" id="track-name">Loading...</div>
                    <div class="sp-artist" id="track-artist">Special Playlist</div>
                </div>
            </div>
            <div class="sp-progress"><div class="sp-bar" id="seek-bar"></div></div>
            <div class="sp-controls">
                <button class="sp-btn" onclick="prevTrack()"><i class="fas fa-step-backward"></i></button>
                <button class="sp-btn sp-play" onclick="playPauseTrack()"><i class="fas fa-play" id="play-icon"></i></button>
                <button class="sp-btn" onclick="nextTrack()"><i class="fas fa-step-forward"></i></button>
            </div>
        </div>
        
        <div id="floating-container"></div>
    </div>

    <audio id="main-audio"></audio>

    <script>
        // --- C·∫§U H√åNH D·ªÆ LI·ªÜU ---
        const PASSWORD = "2301";
        
        // Danh s√°ch nh·∫°c (Thay link mp3 c·ªßa b·∫°n v√†o ƒë√¢y)
        const musicList = [
            {
                name: "Happy Birthday Remix", // T√™n b√†i hi·ªán tr√™n khung
                artist: "DJ Party",
                src: "talklove.mp3", // Link file mp3
                img: "https://i.pinimg.com/564x/a2/63/c9/a263c938382c499299403487f5407024.jpg" // ·∫¢nh b√¨a
            },
            {
                name: "Love Song",
                artist: "Singer Name",
                src: "https://www.soundhelix.com/examples/mp3/SoundHelix-Song-3.mp3",
                img: "https://i.pinimg.com/564x/d9/14/d9/d914d94cc84c9e334547926b472df37b.jpg"
            },
            // Th√™m b√†i kh√°c copy ƒëo·∫°n tr√™n paste xu·ªëng
        ];

        // Danh s√°ch ·∫£nh bay (Thay link ·∫£nh k·ª∑ ni·ªám v√†o ƒë√¢y)
        const photos = [
            "https://i.pinimg.com/564x/00/8e/e5/008ee578849051010701600307602664.jpg",
            "https://i.pinimg.com/564x/78/8b/0e/788b0e01001320110765546003048657.jpg",
            "https://i.pinimg.com/564x/67/20/03/67200385502011188018500040004000.jpg",
            "https://i.pinimg.com/564x/c8/11/8e/c8118e53150017671408546621828400.jpg"
        ];

        // --- X·ª¨ L√ù CHUY·ªÇN M√ÄN H√åNH ---
        function switchScreen(hideId, showId) {
            document.getElementById(hideId).classList.remove('active');
            // Hi·ªáu ·ª©ng fade in
            const next = document.getElementById(showId);
            next.classList.add('active');
            next.style.opacity = 0;
            setTimeout(() => next.style.opacity = 1, 50);
        }

        // 1. Ki·ªÉm tra m·∫≠t kh·∫©u
        function checkPass() {
            const val = document.getElementById('pass-input').value;
            if(val === PASSWORD) {
                switchScreen('screen-lock', 'screen-video');
                // T·ª± ƒë·ªông ph√°t video
                document.getElementById('myVideo').play();
            } else {
                document.getElementById('error-msg').style.display = 'block';
            }
        }

        // 2. K·∫øt th√∫c video -> Qua th∆∞
        function finishVideo() {
            document.getElementById('myVideo').pause();
            switchScreen('screen-video', 'screen-letter');
        }

        // 3. M·ªü ti·ªác -> Qua B√°nh & Nh·∫°c
        function openParty() {
            switchScreen('screen-letter', 'screen-party');
            // B·∫Øt ƒë·∫ßu ph√°t nh·∫°c
            loadTrack(0); // Lu√¥n ph√°t b√†i ƒë·∫ßu ti√™n tr∆∞·ªõc
            playTrack();
            // B·∫Øt ƒë·∫ßu th·∫£ ·∫£nh
            startFloatingPhotos();
        }

        // --- X·ª¨ L√ù NH·∫†C SPOTIFY ---
        let trackIndex = 0;
        let isPlaying = false;
        let currTrack = document.getElementById('main-audio');

        function loadTrack(index) {
            trackIndex = index;
            currTrack.src = musicList[trackIndex].src;
            currTrack.load();
            
            // C·∫≠p nh·∫≠t giao di·ªán Spotify
            document.getElementById('track-art').src = musicList[trackIndex].img;
            document.getElementById('track-name').innerText = musicList[trackIndex].name;
            document.getElementById('track-artist').innerText = musicList[trackIndex].artist;
            
            // Khi h·∫øt b√†i th√¨ t·ª± qua b√†i ng·∫´u nhi√™n
            currTrack.addEventListener("ended", nextTrack);
        }

        function playPauseTrack() {
            if (!isPlaying) playTrack();
            else pauseTrack();
        }

        function playTrack() {
            currTrack.play();
            isPlaying = true;
            document.getElementById('play-icon').classList.remove('fa-play');
            document.getElementById('play-icon').classList.add('fa-pause');
        }

        function pauseTrack() {
            currTrack.pause();
            isPlaying = false;
            document.getElementById('play-icon').classList.remove('fa-pause');
            document.getElementById('play-icon').classList.add('fa-play');
        }

        function nextTrack() {
            // Random b√†i h√°t (tr·ª´ b√†i hi·ªán t·∫°i)
            let newIndex = trackIndex;
            while(newIndex === trackIndex && musicList.length > 1) {
                newIndex = Math.floor(Math.random() * musicList.length);
            }
            loadTrack(newIndex);
            playTrack();
        }

        function prevTrack() {
            let newIndex = trackIndex - 1;
            if (newIndex < 0) newIndex = musicList.length - 1;
            loadTrack(newIndex);
            playTrack();
        }
        
        // C·∫≠p nh·∫≠t thanh ti·∫øn tr√¨nh gi·∫£
        currTrack.addEventListener('timeupdate', () => {
             let position = currTrack.currentTime / currTrack.duration;
             document.getElementById('seek-bar').style.width = (position * 100) + '%';
        });

        // --- X·ª¨ L√ù ·∫¢NH BAY L√äN ---
        function startFloatingPhotos() {
            const container = document.getElementById('floating-container');
            
            setInterval(() => {
                const img = document.createElement('img');
                // Ch·ªçn ·∫£nh ng·∫´u nhi√™n t·ª´ danh s√°ch
                img.src = photos[Math.floor(Math.random() * photos.length)];
                img.classList.add('floating-photo');
                
                // Random v·ªã tr√≠ v√† t·ªëc ƒë·ªô
                img.style.left = Math.random() * 90 + '%';
                img.style.animationDuration = (Math.random() * 5 + 5) + 's'; // 5s ƒë·∫øn 10s
                img.style.width = (Math.random() * 50 + 100) + 'px'; // Random k√≠ch c·ª°
                
                container.appendChild(img);
                
                // X√≥a ·∫£nh sau khi bay xong cho nh·∫π m√°y
                setTimeout(() => { img.remove() }, 10000);
            }, 800); // C·ª© 0.8 gi√¢y th·∫£ 1 ·∫£nh
        }
    </script>
</body>
</html>